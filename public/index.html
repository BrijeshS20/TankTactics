<html lang="en" class="">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Primary Meta Tags -->
    <title>Tank Tactics:- A strategy, co-op, idle game which runs on both the web and discord </title>
    <meta name="title" content="Tank Tactics:- A strategy , co-op ,idle game which runs on both the web and discord ">
    <meta name="description" content="To win this game you must form alliances
, betrayal is inevitable as only one person shall win. It's take just 10 min to learn and great fun for everyone.">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://tanktactics.uc.r.appspot.com/">
    <meta property="og:title" content="Tank Tactics:- A strategy, co-op, idle game game which runs on both the web and discord ">
    <meta property="og:description" content="To win this game you must form alliances
, betrayal is inevitable as only one person shall win. It's take just 10 min to learn and great fun for everyone.">
    <meta property="og:image" content="https://cdn.discordapp.com/app-icons/893072412558655558/9e8e905cbbf1f41b10c6b0b7e480b4af.png?size=256">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://tanktactics.uc.r.appspot.com/">
    <meta property="twitter:title" content="Tank Tactics:- A strategy, co-op, idle game which runs on both the web and discord ">
    <meta property="twitter:description" content="To win this game you must form alliances
, betrayal is inevitable as only one person shall win. It's take just 10 min to learn and great fun for everyone.">
    <meta property="twitter:image" content="https://tanktactics.uc.r.appspot.com/">
    <meta name="keywords" CONTENT="Tank statergy Tactic idle co-op game big brain smart" />
    <meta name="robots" content="all">
    <title>Tank Tactics</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/5.1.1/cerulean/bootstrap.min.css" />
    <style>
        :root {
            --theme-color-1: #343a40;
            --theme-color-2: #ffffff;
            --subtheme-color-1: #6c757d;
            --subtheme-color-2: antiquewhite;
        }

        * {
            background-color: var(--theme-color-1);
            color: var(--theme-color-2);
        }

        #homelink {
            color: var(--theme-color-2);
            text-decoration: none;
        }

        #help {
            display: none;
            color: white;
        }

        #helplist {
            list-style-type: none;
        }

        #game {
            display: none;
        }

        #leaderboard {
            display: none;
        }

        div#game > div#lobbies.col-2.border-end > div.row > a {
            text-decoration: none;
            color: white;
        }

        .dropdown-menu {
            background-color: transparent;
            color: white;
        }

        .lead > #gamelink {
            background-color: var(--theme-color-2);
            color: var(--theme-color-1);
            border-width: 1px;
            border-style: solid;
            border-color: var(--theme-color-2);
            margin-right: 10px;
        }

            .lead > #gamelink:hover {
                background-color: var(--subtheme-color-2);
                color: var(--subtheme-color-1);
                border-color: var(--subtheme-color-2);
            }

        #themes {
            display: none;
        }

        body > div > header > .nav > .dropdown > #dropdownMenuLink {
            color: white;
        }

        a {
            color: var(--theme-color-2);
        }

        .nav-link {
            color: var(--theme-color-2);
        }

            .nav-link:hover {
                color: var(--subtheme-color-2);
            }

        hr {
            color: var(--subtheme-color-2);
        }


        .btn {
            background-color: transparent;
            color: var(--subtheme-color-1);
            border-width: 1px;
            border-style: solid;
            border-color: var(--subtheme-color-2);
            margin-right: 10px;
        }

            .btn:hover {
                background-color: var(--subtheme-color-1);
                color: var(--subtheme-color-2);
                border-width: 1px;
                border-style: solid;
                border-color: var(--subtheme-color-1);
                margin-right: 10px;
            }
    </style>

</head>

<body class="d-flex h-100 text-center text-white bg-dark container-fluid">
    <div class="cover-container d-flex w-100 h-100 p-3 mx-auto flex-column">
        <header class="mb-auto">
            <div>
                <h3 class="float-md-start mb-0">
                    <a href="#home" id="homelink">
                        Tank Tactics
                    </a>
                </h3>
                <nav class="nav nav-masthead justify-content-center float-md-end">
                    <div class="dropdown">
                        <a class="btn dropdown-toggle" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false" style="color: var(--theme-color-2);">
                            Discord
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                            <li><a class="nav-link active" aria-current="page" href="https://discord.com/app" target="_blank">Open Discord</a></li>
                            <li><a class="nav-link" href="https://discord.com/api/oauth2/authorize?client_id=893072412558655558&permissions=2048&scope=bot%20applications.commands" target="_blank">Invite the bot</a></li>
                        </ul>
                    </div>
                    <a class="nav-link" href="#help" id="helplink">Help</a>
                    <a class="nav-link" href="#themes" id="themeslink">Themes</a>
                    <a class="nav-link" href="#leaderboard" id="leaderboardlink">Leaderboard</a>
                </nav>
            </div>
            <br />
            <br />
            <hr />
        </header>
        <main class="px-3">
            <div id="home">
                <h1 style="color: var(--theme-color-2);">Tank Tactics</h1>
                <p class="lead">
                    <a class="btn btn-lg fw-bold" href="#game" id="gamelink">Play Game</a>
                </p>
            </div>
            <div id="help">
                <h1>Help</h1>
                <br>
                <div id="carouselExampleControls" class="carousel slide" data-bs-ride="carousel">
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            Follow this tutorial in order to learn how to play this game.
                            <br />
                            1. First you must <a href="https://discord.com/api/oauth2/authorize?client_id=893072412558655558&permissions=2048&scope=bot%20applications.commands" target="_blank">Invite the bot</a>.<br />
                            2. Then type "!join" in the chat in order to join the game.
                            <br />
                            3. Then navigate here and click on the lobby.
                            <br />
                        </div>
                        <div class="carousel-item">
                            You will be given a action point randomly throughout the day.<br />
                            You can use it to move around and increase the accuracy for your tank.
                            <br />
                            If you are horizontally or vertically in the same line as another tank u can attack it.
                            <br /> The goal of the Game is to be the last man alive.
                            <br />
                            You can give any other player your action points.
                            <br />

                            Dont worry if you die then you can give the alive people your action points when you get them.
                            <br />
                            This makes the dead players the strongest players.
                            <br />
                            So in order to win you must talk to other player form alliances and in the end you may have to betray them.
                        </div>
                        <div class="carousel-item">
                            Movement
                            <br />
                            <br />
                            1. Up    <br /> discord command:!moveup
                            <br />
                            2. Down   <br />discord command:!movedown
                            <br />
                            3. Right  <br />discord command:!moveright
                            <br />
                            4. Left  <br /> discord command:!moveleft
                        </div>
                        <div class="carousel-item">
                            Commands
                            <br />
                            <br />
                            1. Heal:    A 15% chance of healing <br /> discord command:!heal
                            <br />
                            2. Steal:  A 5 min cooldown shared with attack , The person you are stealing from need to have <br /> minimum 15AP <br />  discord command:!steal < mention of user you are stealing from>
                            <br />
                            3. Attack <br /> discord command: !attack  < mention of user you are attacking >
                            <br />
                            4. Give: Give another player a AP     discord command:!give  < mention of user you are stealing from> < number of ap>
                            <br />
                            5. Upgrade: Increase chance of attack hitting an opponent. <br /> discord command: !upgrade
                        </div>
                        <div class="carousel-item">
                            In order to win this game you must team up talk to as many people as possible make alliances as you will not be able to win alone.
                            <br />
                            If you face any issues, contact one of the following staff at discord:
                            <ul id="helplist">
                                <li>deepparag#6330</li>
                                <li>ThunderX#6969</li>
                                <li>DaWise_Weirdo#1120</li>
                                <li>multiii ;>#7676</li>
                            </ul>
                            <br />
                        </div>
                        <div class="carousel-item">
                            Report Bugs and Give Suggestions Here.
                            <br />
                            <embed src="https://forms.gle/FenEgrA2m5mbEtx96" />
                        </div>
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>
            </div>
            <div id="game" class="row">
                <!-- Alerts to be displayed here -->
                <div id="alertspawn"></div>
                <!--Menu Showing List Of Active Lobbies-->
                <div id="lobbies" class="col-2 border-end">

                </div>
                <!-- The Canvas for the Actual Game -->
                <div id="gameview" class="col-8 border-end">
                    <img style="width:100%; height:auto;" id="game-image" />
                </div>
                <!--Dropdown button with options of attacking and giving points-->
                <div id="playerinterface" class="col-2">
                </div>
            </div>
            <div id="themes">
                <h3>Color Themes</h3>
                <button type="button" class="btn" id="light">Set Light Theme</button>
                <br>
                <button type="button" class="btn" id="dark">Set Dark Theme</button>
                <br>
                <br>
                Theme Color One: <input type="color" id="themecolorone">
                <br>
                Theme Color Two: <input type="color" id="themecolortwo">
                <br>
                Subtheme Color One: <input type="color" id="subthemecolorone">
                <br>
                Subtheme Color Two: <input type="color" id="subthemecolortwo">
                <br>
                <br>
                <button type="button" class="btn" id="colorpicker">Set Color Theme</button>
            </div>
            <div id="leaderboard">
                <table class="table">
                    <thead>
                        <tr>
                            <th scope="col">User ID</th>
                            <th scope="col">Wins</th>
                            <th scope="col">Kills</th>
                            <th scope="col">Deaths</th>
                            <th scope="col">KD Ratio</th>
                            <th scope="col">AP Given</th>
                            <th scope="col">AP Received</th>
                        </tr>
                    </thead>
                    <tbody id="leaderboardcontent" class="table">
                    </tbody>
                </table>
            </div>
        </main>
        <footer class="mt-auto text-white-50">
            <hr>
            <p>
                A game which runs on both the communication platform discord and on website. It's idle, real time and co-op.<br> This is war based statergy game in which you have to co-operate with players to win.
                <br>
                A game made by a squad of friends.
            </p>
        </footer>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/mustache@latest"></script>
    <script id="template" type="x-tmpl-mustache">
        <div class="carousel-item"  id="PlayerData">
        <div style="width:100%;height:auto; min-height:20px;background-color:{{color.color}}"> </div>
         <span class="justify-content-center" style="text-align:center">{{name}}<br>Action points: {{actionPoints}}<br> Health: {{health}}  <br> accuracy: {{accuracy}}%<span>
        </div>
    </script>

    <script id="lobby" type="x-tmpl-mustache">
        <button class="btn btn-outline-light btn-sm " onclick="channelId = '{{channelId}}';RenderMap();">{{channelName}} in {{serverName}}</button>
    </script>


    <script id="attackTemplate" type="x-tmpl-mustache">
        <button class="btn btn-outline-light btn-sm "  onclick="move({{id}},'attack')">{{name}}</button>
    </script>

    <script id="stealTemplate" type="x-tmpl-mustache">
             <button class="btn btn-outline-light btn-sm " onclick="move({{id}},'steal')">{{name}}</button>
    </script>

    <script id="giveTemplate" type="x-tmpl-mustache">
        <button class="btn btn-outline-light btn-sm " onclick="move({{id}},'give')">{{name}}</button>
    </script>

    <script id="resortTemplate" type="x-tmpl-mustache">
             <button class="btn btn-outline-light btn-sm " onclick="move({{id}},'resort')">{{name}}</button>
    </script>

    <script id="reviveTemplate" type="x-tmpl-mustache">
        <button class="btn btn-outline-light btn-sm " onclick="move({{id}},'revive')">{{name}}</button>
    </script>
    <script>



        let root = document.querySelector(':root');

        if (window.localStorage.getItem('theme-color-1') == null) {
            window.localStorage.setItem('theme-color-1', '#343a40');
            window.localStorage.setItem('theme-color-2', '#ffffff');
            window.localStorage.setItem('subtheme-color-1', '#6c757d');
            window.localStorage.setItem('subtheme-color-2', 'antiquewhite');
        } else {
            root.style.setProperty('--theme-color-1', (window.localStorage.getItem('theme-color-1')));
            root.style.setProperty('--theme-color-2', (window.localStorage.getItem('theme-color-2')));
            root.style.setProperty('--subtheme-color-1', (window.localStorage.getItem('subtheme-color-1')));
            root.style.setProperty('--subtheme-color-2', (window.localStorage.getItem('subtheme-color-2')));
        }


        let channelId = 0;
        let alertspawn = document.querySelector("#alertspawn");
        // Helper Functions:

        function getCookie(name) {
            var dc = document.cookie;
            var prefix = name + "=";
            var begin = dc.indexOf("; " + prefix);
            if (begin == -1) {
                begin = dc.indexOf(prefix);
                if (begin != 0) return null;
            }
            else {
                begin += 2;
                var end = document.cookie.indexOf(";", begin);
                if (end == -1) {
                    end = dc.length;
                }
            }
            // because unescape has been deprecated, replaced with decodeURI
            //return unescape(dc.substring(begin + prefix.length, end));
            return decodeURI(dc.substring(begin + prefix.length, end));
        }


        function notify(message) {
            alertspawn.innerHTML = `
                        <div class="alert alert-warning alert-dismissible fade show" role="alert">
                            ${message}
                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>
                        `;
        }

        function move(id, type) {
            $.get('https://tanktactics.uc.r.appspot.com/move', {
                "channelId": channelId,
                "userId": JSON.parse(getCookie('login').trim()).userId,
                "key": JSON.parse(getCookie('login').trim()).key,
                "move": type,
                "id": id
            }, resp => {
                notify(resp.message);
                RenderMap();
            });
        }
        function fast() {
            $.get('https://tanktactics.uc.r.appspot.com/fast', {
                "channelId": channelId,
                "userId": JSON.parse(getCookie('login').trim()).userId
            }, resp => {
                notify(resp.message);
                RenderMap();
            });
        }
        function start() {
            $.get('https://tanktactics.uc.r.appspot.com/start', {
                "channelId": channelId,
                "userId": JSON.parse(getCookie('login').trim()).userId
            }, resp => {
                notify(resp.message);
                RenderMap();
            });
        }

        //Draw RenderMap
        function RenderMap() {
            if (channelId != 0) {
                $.get('https://tanktactics.uc.r.appspot.com/data', { "channelId": channelId }, resp => {
                    console.log(resp);
                    let game = resp;
                    const width = game.boardSize * 2 * 10 + 10;
                    const height = game.boardSize * 2 * 10 + 10;

                    const canvas = document.createElement('canvas');
                    canvas.setAttribute("width", width);
                    canvas.setAttribute("height", height);
                    const context = canvas.getContext('2d');
                    context.fillStyle = '#343a40';
                    context.fillRect(0, 0, width, height)

                    context.fillStyle = '#a39c93';
                    for (var x = 0; x < game.boardSize; x++) {

                        for (var y = 0; y < game.boardSize; y++) {
                            context.fillRect(x * 20 + 10, y * 20 + 10, 10, 10);
                        }

                    }
                    var rendered = "";
                    var attack = "";
                    var give = "";
                    var steal = "";
                    var resort = "";
                    var revive = "";
                    game.users.forEach((user) => {
                        rendered += Mustache.render(document.getElementById('template').innerHTML, user);
                        if (user.health > 0) {
                            context.fillStyle = user.color.color;
                            context.fillRect(user.x * 20 - 1.5, user.y * 20 - 1.5, 13, 13);
                        }
                        attack += Mustache.render(document.getElementById('attackTemplate').innerHTML, user);
                        give += Mustache.render(document.getElementById('giveTemplate').innerHTML, user);
                        steal += Mustache.render(document.getElementById('stealTemplate').innerHTML, user);
                        resort += Mustache.render(document.getElementById('resortTemplate').innerHTML, user);
                        revive += Mustache.render(document.getElementById('reviveTemplate').innerHTML, user);
                    });
                    document.getElementById('resortMenu').innerHTML = resort;
                    document.getElementById('reviveMenu').innerHTML = revive;
                    document.getElementById('stealMenu').innerHTML = steal;
                    document.getElementById('attackMenu').innerHTML = attack;
                    document.getElementById('giveMenu').innerHTML = give;
                    document.getElementById('playerData').innerHTML = rendered;
                    document.getElementById('PlayerData').classList.add('active');
                    document.getElementById('game-image').src = canvas.toDataURL();

                });

            }
        }

        let home = document.querySelector('#home');
        let help = document.querySelector('#help');
        let game = document.querySelector('#game');
        let themes = document.querySelector('#themes');
        let leaderboard = document.querySelector('#leaderboard');

        let homelink = document.querySelector('#homelink');
        let helplink = document.querySelector('#helplink');
        let gamelink = document.querySelector('#gamelink');
        let themeslink = document.querySelector('#themeslink');
        let leaderboardlink = document.querySelector('#leaderboardlink');

        let lobbies = document.querySelector("#lobbies");
        let gameview = document.querySelector("#gameview");
        let playerInterface = document.querySelector("#playerinterface");

        let themeone = document.querySelector('#themecolorone');
        let themetwo = document.querySelector('#themecolortwo');
        let subthemeone = document.querySelector('#subthemecolorone');
        let subthemetwo = document.querySelector('#subthemecolortwo');

        let darkmode = document.querySelector('#dark');
        let lightmode = document.querySelector('#light');
        let colorpicker = document.querySelector('#colorpicker');

        playerInterface.innerHTML = `
                                                            <span class=""> <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
                                                  <div class="carousel-inner" id="playerData">
                                                  </div>
                                                  <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
                                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                                    <span class="visually-hidden">Previous</span>
                                                  </button>
                                                  <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
                                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                                    <span class="visually-hidden">Next</span>
                                                  </button>
                                                 </div></span>
                                                            <div class="dropdown">
                                                                <div class="btn-group dropstart" role="group">
                                                                    <button class="btn btn-outline-light btn-sm dropdown-toggle" id="give" data-toggle="dropdown" data-bs-toggle="dropdown"
                                                                    aria-expanded="false">Give Action Points</button>
                                                                    <ul class="dropdown-menu" aria-labelledby="give" id="giveMenu">
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                            <div class="dropdown">
                                                                <div class="btn-group dropstart" role="group">
                                                                    <button class="btn btn-outline-light btn-sm dropdown-toggle" id="attack" data-toggle="dropdown" data-bs-toggle="dropdown"
                                                                     aria-expanded="false">Attack Opponents</button>
                                                                    <ul class="dropdown-menu" aria-labelledby="attack" id="attackMenu">

                                                                    </ul>
                                                                </div>
                                                            </div>
                                                              <div class="dropdown">
                                                                <div class="btn-group dropstart" role="group">
                                                                    <button class="btn btn-outline-light btn-sm dropdown-toggle" id="steal" data-toggle="dropdown" data-bs-toggle="dropdown"
                                                                    aria-expanded="false">Steal Action Points</button>
                                                                    <ul class="dropdown-menu" aria-labelledby="give" id="stealMenu">
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                           <div class="dropdown">
                                                                <div class="btn-group dropstart" role="group">
                                                                    <button class="btn btn-outline-light btn-sm dropdown-toggle" id="revive" data-toggle="dropdown" data-bs-toggle="dropdown"
                                                                    aria-expanded="false">Revive </button>
                                                                    <ul class="dropdown-menu" aria-labelledby="give" id="reviveMenu">
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                           <div class="dropdown">
                                                                <div class="btn-group dropstart" role="group">
                                                                    <button class="btn btn-outline-light btn-sm dropdown-toggle" id="resort" data-toggle="dropdown" data-bs-toggle="dropdown"
                                                                    aria-expanded="false">Resort </button>
                                                                    <ul class="dropdown-menu" aria-labelledby="give" id="resortMenu">
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                            <hr>
                                                            <div class="btn-group btn-group-sm" role="group">
                                                                <button class="btn btn-outline-light" onclick="move(99,'left');">Left</button>
                                                                <button class="btn btn-outline-light onclick="move(99,'up');" >Up</button>
                                                            </div>
                                                            <div class="btn-group btn-group-sm" role="group">
                                                                <button class="btn btn-outline-light"onclick="move(99,'right');">Right</button>
                                                                <button class="btn btn-outline-light"onclick="move(99,'down');">Down</button>
                                                                <br>

                                                            </div>
                                                           <div class="btn-group btn-group-sm" role="group">
                                                               <button class="btn btn-outline-light"onclick="move(99,'upgrade');" >Upgrade</button>
                                                               <button class="btn btn-outline-light"onclick="move(99,'heal');" >Heal</button>
                                                          <div class="btn-group btn-group-sm" role="group">
                                                           <div class="btn-group btn-group-sm" role="group">
                                                               <button class="btn btn-outline-light"onclick="start();" >Start</button>
                                                               <button class="btn btn-outline-light"onclick="fast();" >Blitz</button>
                                                          <div class="btn-group btn-group-sm" role="group">

                                                        `;

        // Theme Change:
        function enterLightMode() {
            root.style.setProperty('--theme-color-1', '#ffffff');
            root.style.setProperty('--theme-color-2', '#343a40');
            root.style.setProperty('--subtheme-color-1', '#f8f9fa');
            root.style.setProperty('--subtheme-color-2', '#6c757d');

            window.localStorage.setItem('theme-color-1', '#ffffff');
            window.localStorage.setItem('theme-color-2', '#343a40');
            window.localStorage.setItem('subtheme-color-1', '#f8f9fa');
            window.localStorage.setItem('subtheme-color-2', '#6c757d');
        }

        function enterDarkMode() {
            root.style.setProperty('--theme-color-1', '#343a40');
            root.style.setProperty('--theme-color-2', '#ffffff');
            root.style.setProperty('--subtheme-color-1', '#6c757d');
            root.style.setProperty('--subtheme-color-2', '#f8f9fa');

            window.localStorage.setItem('theme-color-1', '#343a40');
            window.localStorage.setItem('theme-color-2', '#ffffff');
            window.localStorage.setItem('subtheme-color-1', '#6c757d');
            window.localStorage.setItem('subtheme-color-2', '#f8f9fa');
        }

        function enterCustomTheme() {
            root.style.setProperty('--theme-color-1', themeone.value);
            root.style.setProperty('--theme-color-2', themetwo.value);
            root.style.setProperty('--subtheme-color-1', subthemeone.value);
            root.style.setProperty('--subtheme-color-2', subthemetwo.value);

            window.localStorage.setItem('theme-color-1', themeone.value);
            window.localStorage.setItem('theme-color-2', themetwo.value);
            window.localStorage.setItem('subtheme-color-1', subthemeone.value);
            window.localStorage.setItem('subtheme-color-2', subthemetwo.value);
        }

        // Single Page App Helper Functions:
        function showHome() {
            game.style.display = "none";
            help.style.display = "none";
            home.style.display = "block";
            themes.style.display = "none";
            leaderboard.style.display = "none";
        }

        function showLeaderBoard() {
            game.style.display = "none";
            home.style.display = "none";
            help.style.display = "none";
            themes.style.display = "none";
            leaderboard.style.display = "block";
            $.get('https://tanktactics.uc.r.appspot.com/leaderboard', {}, function (resp) {
                console.log(resp);
                let lb = resp;
                let content = ``;
                for (let person of lb) {
                    content += `
                                    <tr>
                                        <td>${person.userId}</td>
                                        <td>${person.wins}</td>
                                        <td>${person.kills}</td>
                                        <td>${person.deaths}</td>
                                        <td>${person.kills / person.deaths}</td>
                                        <td>${person.apGiven}</td>
                                        <td>${person.apRecived}</td>
                                    </tr>
                                    `;
                }
                document.querySelector('#leaderboardcontent').innerHTML = content;
            });
        }

        function showHelp() {
            game.style.display = "none";
            home.style.display = "none";
            help.style.display = "block";
            themes.style.display = "none";
            leaderboard.style.display = "none";
        }

        function showGame() {
            // Make the list of lobbies on the left
            $.get('https://tanktactics.uc.r.appspot.com/games', {
                "userId": JSON.parse(getCookie('login').trim()).userId,
                "key": JSON.parse(getCookie('login').trim()).key,
            }, resp => {
                let lobbylist = "";
                var lobbyTemplate = document.getElementById('lobby');
                console.log(resp);
                if (resp.length > 0) {
                    resp.forEach(lobby => {
                        lobbylist += Mustache.render(lobbyTemplate.innerHTML, lobby);
                    });
                    lobbies.innerHTML = lobbylist;
                    // Make the Game Page visible
                    home.style.display = 'none';
                    help.style.display = 'none';
                    game.style.display = 'flex';
                    themes.style.display = 'none';
                    leaderboard.style.display = 'none';
                } else {
                    alert('Please join a lobby. If you dont know how to see help!!');
                }
            });
        }

        function showThemes() {
            home.style.display = 'none';
            help.style.display = 'none';
            game.style.display = 'none';
            themes.style.display = 'block';
            leaderboard.style.display = 'none';
        }

        homelink.addEventListener('click', showHome);
        helplink.addEventListener('click', showHelp);
        themeslink.addEventListener('click', showThemes);
        leaderboardlink.addEventListener('click', showLeaderBoard);


        let vars = {};
        let parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, (m, key, value) => {
            vars[key] = value;
        });
        console.log(vars);

        if (vars['userId'] != null) {
            if (getCookie('login') == null) {

                document.cookie = '';
                document.cookie = 'login=' + JSON.stringify({ "userId": vars['userId'], "key": vars['keys'] }) + '; ';
                location.replace('/');
            }
        }

        gamelink.addEventListener('click', () => {
            if (getCookie('login') == null) {
                showHome();
                gamelink.href = "https://discord.com/api/oauth2/authorize?client_id=893072412558655558&redirect_uri=https%3A%2F%2Ftanktactics.uc.r.appspot.com%2Fauthorize&response_type=code&scope=identify%20guilds";
            } else {

                showHome();
                gamelink.href = "#game";
                showGame();
            }
        });


        lightmode.addEventListener('click', enterLightMode);
        darkmode.addEventListener('click', enterDarkMode);
        colorpicker.addEventListener('click', enterCustomTheme);

        if (window.location.href.split('#')[1] !== null) {
            if (window.location.href.split('#')[1] == 'help') {
                showHelp();
            }
        }

        setInterval(RenderMap, 1000 * 60);

    </script>


</body>

</html>